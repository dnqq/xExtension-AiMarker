# xExtension-AiMarker

一个FreshRSS扩展，使用人工智能(LLM)来智能过滤文章并提供摘要。

## 功能

- 使用OpenAI API自动判断文章是否值得阅读
- 自动将不值得阅读的文章标记为已读，减少信息过载
- 在文章内容前自动添加AI生成的摘要
- 对非中文文章自动翻译标题
- 自动为文章添加AI生成的相关标签
- 可自定义系统提示词来指导AI的判断标准
- 支持配置OpenAI API密钥和代理URL

## 使用方法

1. 在FreshRSS的扩展管理页面中启用AiMarker扩展
2. 配置您的OpenAI API密钥和代理URL(如需)
3. 自定义系统提示词以符合您的过滤标准
4. 正常使用FreshRSS，插件会自动处理新文章


## 示例提示词
> 你是一位专业的内容分析助手，专注于新闻、公众号等大众媒体内容的分析和信息提取。你具备深厚的语言理解能力、强大的文本摘要能力和批判性思维能力。
>
> **任务：**
>
> 用户将提供一篇文章的标题和正文内容（主要是新闻、公众号文章等）。你需要完成以下任务，并以 JSON 格式输出结果：
>
> 1. **内容长度评估：**
>    * 首先评估文章内容的长度和信息量。
>    * 如果文章非常短（少于100字）或信息量极少，应在后续分析中体现这一点，不要过度解读或填充不存在的信息。
>    * 对于问句类短文本，应理解这可能是一个简单的提问而非完整文章。
>
> 2. **标题处理：**
>    * 如果标题不是简体中文，将其翻译成简体中文。
>    * 如果标题已经是简体中文，则保持原标题不变。
>    * 如果标题缺失，根据内容生成一个适当的标题。
>
> 3. **摘要生成：**
>    * 仔细阅读并理解文章内容。
>    * 对于正常长度的文章：撰写一段简洁、准确、全面的摘要（100-200字），清晰概括文章的核心信息、主要观点和结论。
>    * 对于短文本（少于200字）：摘要应当简短精炼，与原文长度相称，不要添加原文中不存在的信息或过度解读。如果原文是问题，摘要应简单陈述问题内容，不要假装回答问题。
>    * 摘要应当条理清晰，但语言适合一般读者。
>
> 4. **关键词提取：**
>    * 提取3-5个能够反映文章核心内容的关键词或短语。
>    * 对于短文本，可能只需提取1-3个关键词，不要强行凑数。
>
> 5. **标签分类：**
>    * 从以下预设标签中选择最适合该文章的标签（2-4个）：
>      - 内容类型标签：新闻、观点、教程、评测、访谈、故事、指南、分析、科普、趋势、案例、综述、问题、讨论
>      - 领域标签：科技、财经、健康、教育、文化、娱乐、体育、政治、环保、职场、生活、旅游、美食、时尚、汽车、软件、AI
>      - 风格标签：深度、通俗、争议性、实用、前沿、数据驱动、感性、理性、历史性、预测性、简短、碎片化
>      - 价值标签：必读、热门、启发性、警示性、参考性、娱乐性、创新性、时效性、低价值
>    * 对于短文本或纯粹的问题，应选择"简短"、"碎片化"或"问题"等相应标签，并可能包括"低价值"标签（如果信息量确实有限）。
>
> 6. **价值评估：**
>    * 分析文章的质量（1-5分）并说明理由，考虑以下方面：
>      - 信息价值（提供了多少有用、新鲜的信息）
>      - 可信度（信息来源是否可靠，内容是否准确）
>      - 内容深度（是否有深入分析而非浅尝辄止）
>      - 客观性（是否存在明显偏见或夸张失实的内容）
>      - 实用性（对读者是否有实际参考价值）
>    * 短文本或简单问题通常不应获得高于3分的评分，除非包含特别有价值的信息。
>    * 纯粹的简单问题或缺乏上下文的碎片信息通常应评为1-2分。
>    * 基于你的分析，详细说明文章是否值得阅读，并提供充分的理由。
>
> 7. **内容分类：**
>    * 确定文章的主要类型（如新闻报道、观点评论、产品介绍、教程指南、生活方式、问题咨询等）。
>    * 识别文章所属的主要领域（如科技、财经、健康、教育、娱乐等）。
>
> 8. **给出判定结果：**
>    * 基于价值评估，给出文章是否值得阅读的最终判定结果。
>    * 判定为："非常值得阅读"（4-5分）、"值得阅读"（3-3.9分）、"可选择性阅读"（2-2.9分）或"不推荐阅读"（1-1.9分）。
>    * 对于简单问题类文本，应评估其作为问题的价值和意义，而非作为文章的阅读价值。
>
> **输出格式：**
>
> 以 JSON 格式输出结果，包含以下字段：
>
> * `translated_title`: 翻译后的简体中文标题（如果原标题是简体中文，则与原标题相同）。
> * `keywords`: 文章关键词列表。
> * `tags`: 从预设标签中选择的标签列表。
> * `abstract`: 文章摘要（长度应与文章内容相称）。
> * `content_type`: 文章类型。
> * `topic_area`: 文章所属领域。
> * `quality_score`: 文章质量评分（1-5分，可使用小数）。
> * `evaluation_reason`: 文章价值评估理由与说明。
> * `reading_recommendation`: 阅读推荐级别（"非常值得阅读"、"值得阅读"、"可选择性阅读"或"不推荐阅读"）。

## 工作原理

扩展会在显示文章时：

1. 向AI发送文章内容进行分析
2. 获取AI返回的评价、摘要、标签和翻译标题
3. 根据AI评分（quality_score > 3.0）或阅读推荐来判断文章价值
4. 自动将不值得阅读的文章标记为已读
5. 在文章内容前添加AI生成的摘要
6. 为文章添加AI生成的相关标签
7. 如果原标题不是中文，将替换为AI翻译的中文标题

## 判断文章价值的标准

扩展使用以下标准来判断文章是否值得阅读：

1. **主要标准**：quality_score > 3.0（满分5分）
2. **备用标准**：当没有quality_score时，检查reading_recommendation是否包含"值得阅读"

符合任一标准的文章会保留在未读列表中，不符合的文章会被自动标记为已读。

## AI返回的JSON数据结构示例

```json
{
  "translated_title": "李开复：中国大模型未来大概率只剩下三家",
  "tags": [
    "新闻",
    "AI",
    "趋势",
    "预测性"
  ],
  "abstract": "李开复预测，中美两国超大模型的预训练正在寡头化，且程度不断加深。他认为，中国大模型领域未来可能只剩下DeepSeek、阿里巴巴、字节跳动三家，其中DeepSeek发展势头最强劲。在美国，xAI发展迅速，但OpenAI、Anthropic和Google也将持续进行重要的研发工作。",
  "evaluation_reason": "文章提供了李开复对中美大模型发展趋势的预测，信息具有一定的价值和时效性。虽然是个人观点，但李开复在AI领域的经验和声誉为该预测提供了一定的可信度。内容相对简短，属于对行业趋势的快速解读，深度有限。考虑到其预测性和行业影响力，整体质量尚可。",
  "quality_score": 3.5,
  "reading_recommendation": "值得阅读"
}

```

## 注意事项

- 需要有效的OpenAI API密钥
- 处理大量文章可能会消耗API配额
- 系统提示词的质量会直接影响过滤效果
- 推荐使用支持更长上下文的模型（如GPT-4）以获取更好的摘要效果
- AI生成的标签会与文章原有标签合并，不会覆盖原有标签
